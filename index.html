<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pour Lisa ‚ù§Ô∏è</title>

<style>

:root{
  --pink:#ff4d6d;
  --soft:#ffe6ef;
}

*{box-sizing:border-box;margin:0;padding:0;}

body{
  font-family:Segoe UI, sans-serif;
  overflow:hidden;
  background:linear-gradient(-45deg,#ffe6ef,#ffd6e7,#fff0f5,#ffffff);
  background-size:400% 400%;
  animation:bgMove 15s ease infinite;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

canvas{
  position:fixed;
  inset:0;
  z-index:0;
}

.card{
  position:relative;
  z-index:2;
  background:rgba(255,255,255,0.9);
  backdrop-filter:blur(15px);
  padding:40px;
  border-radius:30px;
  text-align:center;
  width:90%;
  max-width:650px;
  box-shadow:0 40px 100px rgba(0,0,0,0.2);
  animation:fadeIn 1s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

h1{
  font-size:clamp(26px,5vw,42px);
  margin-bottom:30px;
  min-height:70px;
}

.arena{
  position:relative;
  height:250px;
}

button{
  padding:14px 30px;
  font-size:18px;
  border-radius:999px;
  border:none;
  cursor:pointer;
  position:absolute;
  transition:0.15s;
}

#yes{
  background:var(--pink);
  color:white;
  left:20%;
  top:50%;
  transform:translate(-50%,-50%);
  animation:pulse 2s infinite;
}

#no{
  background:white;
  border:2px solid #ddd;
  left:70%;
  top:50%;
  transform:translate(-50%,-50%);
}

@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(255,77,109,0.6)}
  70%{box-shadow:0 0 0 25px rgba(255,77,109,0)}
  100%{box-shadow:0 0 0 0 rgba(255,77,109,0)}
}

@media(max-width:600px){
  .arena{height:200px;}
  button{font-size:16px;padding:12px 22px;}
}

.fade-out{
  animation:fadeOut 1s forwards;
}

@keyframes fadeOut{
  to{opacity:0;transform:scale(1.1)}
}

</style>
</head>
<body>

<canvas id="canvas"></canvas>

<audio id="music" loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3">
</audio>

<div class="card" id="card">
  <h1 id="question"></h1>
  <div class="arena" id="arena">
    <button id="yes">Oui</button>
    <button id="no">Non</button>
  </div>
</div>

<script>

/* MUSIC AUTOPLAY */
window.addEventListener("click",()=>{
  document.getElementById("music").play();
},{once:true});

/* TYPEWRITER */
const text="Lisa, veux-tu √™tre ma Valentine ?";
let i=0;
function type(){
  if(i<text.length){
    question.textContent+=text[i];
    i++;
    setTimeout(type,45);
  }
}
type();

/* PARTICULES PHYSIQUES */
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

window.onresize=()=>{
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}

let particles=[];

for(let i=0;i<80;i++){
  particles.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    vx:(Math.random()-0.5)*0.8,
    vy:(Math.random()-0.5)*0.8,
    size:2+Math.random()*3
  });
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="rgba(255,120,150,0.5)";
  particles.forEach(p=>{
    p.x+=p.vx;
    p.y+=p.vy;
    if(p.x<0||p.x>canvas.width)p.vx*=-1;
    if(p.y<0||p.y>canvas.height)p.vy*=-1;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
    ctx.fill();
  });
  requestAnimationFrame(animate);
}
animate();

/* BOUTON NON INTELLIGENT */
const no=document.getElementById("no");
const arena=document.getElementById("arena");

arena.addEventListener("mousemove",e=>{
  const rect=no.getBoundingClientRect();
  const dx=e.clientX-(rect.left+rect.width/2);
  const dy=e.clientY-(rect.top+rect.height/2);
  const dist=Math.sqrt(dx*dx+dy*dy);

  if(dist<160){
    const area=arena.getBoundingClientRect();
    no.style.left=Math.random()*area.width+"px";
    no.style.top=Math.random()*area.height+"px";
  }
});

/* MINI JEU: bouton Oui fuit l√©g√®rement */
const yes=document.getElementById("yes");

arena.addEventListener("mousemove",e=>{
  const rect=yes.getBoundingClientRect();
  const dx=e.clientX-(rect.left+rect.width/2);
  const dy=e.clientY-(rect.top+rect.height/2);
  const dist=Math.sqrt(dx*dx+dy*dy);

  if(dist<80){
    yes.style.left=(parseFloat(yes.style.left)||20)+ (Math.random()*20-10) + "%";
  }
});

/* COEURS */
function heart(){
  const h=document.createElement("div");
  h.textContent="üíñ";
  h.style.position="fixed";
  h.style.left=Math.random()*100+"vw";
  h.style.bottom="-20px";
  h.style.fontSize=(20+Math.random()*30)+"px";
  h.style.animation="rise 5s linear forwards";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),5000);
}

const style=document.createElement("style");
style.innerHTML=`
@keyframes rise{
  from{transform:translateY(0);opacity:1}
  to{transform:translateY(-120vh);opacity:0}
}`;
document.head.appendChild(style);

/* FEU D'ARTIFICE */
function firework(){
  for(let i=0;i<50;i++){
    const spark=document.createElement("div");
    spark.style.position="fixed";
    spark.style.width="6px";
    spark.style.height="6px";
    spark.style.borderRadius="50%";
    spark.style.background=["#ff4d6d","#ffd166","#ff85a1","#fff"][Math.floor(Math.random()*4)];
    spark.style.left=innerWidth/2+"px";
    spark.style.top=innerHeight/2+"px";
    const angle=Math.random()*2*Math.PI;
    const dist=200+Math.random()*200;
    spark.animate([
      {transform:"translate(0,0)",opacity:1},
      {transform:`translate(${Math.cos(angle)*dist}px,${Math.sin(angle)*dist}px)`,opacity:0}
    ],{duration:1500});
    document.body.appendChild(spark);
    setTimeout(()=>spark.remove(),1500);
  }
}

/* CLICK OUI */
yes.onclick=()=>{
  for(let i=0;i<40;i++){
    setTimeout(heart,i*50);
  }
  firework();

  document.getElementById("card").classList.add("fade-out");

  setTimeout(()=>{
    document.body.innerHTML=`
    <div style="
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
    text-align:center;
    background:linear-gradient(135deg,#ffe6ef,#ffffff);
    padding:20px;">
      <h1 style="font-size:clamp(28px,6vw,48px);margin-bottom:20px;">
      Yes, meilleure d√©cision de ta vie üíõ
      </h1>

      <img src="https://media.giphy.com/media/l3q2K5jinAlChoCLS/giphy.gif"
           style="width:90%;max-width:400px;border-radius:20px;margin:20px 0;">

      <div style="font-size:clamp(32px,7vw,56px);color:#ff4d6d;font-weight:bold;">
      Je t'aime Lisa ‚ù§Ô∏è
      </div>
    </div>
    `;
  },1000);
};

</script>
</body>
</html>
